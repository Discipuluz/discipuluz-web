<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">

<link rel="import" href="discipuluz-layout/discipuluz-header.html">
<link rel="import" href="discipuluz-layout/discipuluz-content.html">
<link rel="import" href="discipuluz-layout/discipuluz-footer.html">


<dom-module id="discipuluz-web-app">
	<template>
		<style>
			:host {
				display: block;
				--primary-bg-color: rgb(241, 241, 241);
				--primary-title-color: rgb(152,211,83);
				--primary-text-color: rgb(91, 91, 91);

				--secondary-bg-color: rgb(21, 21, 21);
				--secondary-title-color: rgb(241,241,241);
				--secondary-text-color: rgb(241,241,241);

				--paper-input-container-color: var(--primary-text-color);
				--paper-input-container-focus-color: var(--primary-title-color);

				font-family: 'Roboto', sans-serif;
			}
			.bg{
				position:fixed;
					top: 0;
					left: 0;
				width: 100%;
			}
		</style>

		<app-location route="{{route}}"></app-location>
		<app-route
			route="{{route}}"
			pattern="/:page"
			data="{{routeData}}"
			tail="{{subroute}}">
		</app-route>

		<iron-media-query query="max-width: 767px" query-matches="{{smallScreen}}"></iron-media-query>

		<img class="bg" src="../images/bg[[_size(smallScreen)]].png" />
		<discipuluz-header page="{{page}}"></discipuluz-header>
		<discipuluz-content page="{{page}}"></discipuluz-content>
		<discipuluz-footer page="{{page}}"></discipuluz-footer>

	</template>

	<script>
		Polymer({
			is: 'discipuluz-web-app',

			properties: {
				page: {
					type: String,
					observer: '_changePage'
				},
				route: {
					type: Object,
					observer: '_changeRoute'
				}
			},

			_size: function(smallScreen){
				return smallScreen ? '-mobile' : '-desktop'
			},

			_changeRoute: function(){
				if(!this.routeData.page){
					this.set('page', 'inicio')
				}else {
					this.set('page', this.routeData.page)
				}
			},
			_changePage: function(){
				if(this.page === 'inicio'){
					this.set('route.path', '/')
				}else{
					this.set('route.path', '/' + this.page)
				}
			}
		});
	</script>
</dom-module>
